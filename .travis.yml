language: node_js
node_js:
  - "10.8.0"

branches:
  only:
  - master

cache:
  directories:
    - node_modules

notifications:
  email: false

env:
  global:
    # MONGODB_DATABASE
    - secure: "ya6I4B9HKDqR8m8phxIAAqj759wLjISFu2dy1RZ8r1TNGTb4sW7Kltx5a9ytT+40WMFg5PkEM9hZG6XLSQgtNmdo5oiEOrXp61/3J2b9maOh5xpDq/KL5ELPZDNEqnEtW3NenrF9o7igqCEaI2GU4jZBCWHAaJLKZjH1+iLTrPWZfjnzA7u2GesptDdkqQSjll3SoEvBuV7Ie0Arn9RyAIq+OyTJJ4HDoqa/AN0J1D0g5gTmbzuSQf/vJMi3oMYYOw67pKAa3E2sY44kNZd3hB99aeiWU8l0yz8OU5C96slE4B5MN6kkAbGGVViDOw+xi9oRcqf+Nr8VRSOOy1eewDpOzKjyvXcoe3RrzqcZZZn3LqUzPy9J7TWRA33e26Yg3wQRwLni5qO3KH41k97Taxqv0VwekQ13jO0c4s5OrO2zi8aSUaddluuF/I5JnBnSj/hqK/97Bym7r8to4aC+NW0YHYTfsGHqT/p6DUAFlMb0TkgReNoJGdCh04aBuKX8DiTjJv22r2N8O4VJ2LQeJxxowM4Bfvr6pdn1bDJJG/ZWOKq7OBxpkwpcO6jskYfmVagLf4+gmq75sQLD+lK8cvPmTxlVfhJKTKdVHeUK8w9LfxoB1BFT7IdBaqSUmeAGHzDx2EaZAz9pPU5dUpq0uWg2NgnR6mmVw8F2AR8nbC4="

before_install:
- curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version 1.9.4
- export PATH="$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH"
- printf 'yarn-offline-mirror "./.yarn-offline-mirror"\n--production false\n--pure-lockfile true' >> .yarnrc

install:
- yarn install

script:

deploy:
  provider: heroku
  api_key:
    secure: EEys+BOI0HnjopA5TgSRfmC3nJCmgqd1B0TUKjSLKDHCYF78/Nstz2pY4Vb6w1vnJWb5K9SRQRxxe/Fk+tYOS+yKHisDupGKbObg7jyLN2GcBEWIYO0Mw3NWxdADHTvir9/POiQyf0RhMTBHqds5L6tl4MXBiwjXkl6p7cezRJ9NoqEKrEgrKPRW/CKew2RLS6oAA0LORoa/o2qATaSf6oeqBkEcI4yeHLIPKETzz3JmItjUYRJxZTSiavQiPP4cJRVoC5ibYAZKkiqRliScxuYPeuQuDziBwlM6KUKz7pYveM8oUUxXbZ0f4NHsJpR/646yGC++m+lKqlbdK4ylRnl8qm9gbonKOdIoPifXQUn4qo7DmgTaQh40XdN42K4OvEnc5uoHntDl1aG1d4UDRVOzYzx9iBJKxcVftw+Kh3SWvb/7F1Zptkjfn07qASat8tHV6q4kMbOjAfXrHdpQmaOKck3gESpCBRkkiOHVZ0l+yVnTOQJ45hCgkQasVzpsOqcOKV7gfyDSFuiWkgyPjWKs/cOFUtiv1l2HAX4ZPQUng5EzCYXry9mTIMzRBTIw6ObhyVdYX7fvhqFB/QHYRB3g8IJh/iDEuQ5jV76srsRKPA29msNChf7YksYb/sl4tMREYIgTdW/vrM2/z9o1CtrgvGfAko85OM88bZjRZd8=
  skip-cleanup: true
  on:
    branch: master
  app: ps-family-tree-bff